
@import "../../base/var";
@import "../../base/config";
@import "../../config/mixins/index.scss";

$year-and-month-margin: #{$--date-picker-pane-margin * 2};

@function size-common($size, $field){
  $font-size: $--font-size-default;
  $height: $--height-default;

  $return-value: '';
  @if($size == 'mini'){
    $font-size: $--font-size-mini;
    $height: $--height-mini;
  }@else if($size == 'small'){
    $font-size: $--font-size-small;
    $height: $--height-small;
  }@else if($size == 'large'){
    $font-size: $--font-size-large;
    $height: $--height-large;
  }
  $year-width: #{$height * 7 / 3};
  $pane-min-width: #{($height + $--date-picker-pane-margin * 2) * 7};
  $show-week-number-pane-min-width: #{($height + $--date-picker-pane-margin * 2) * 8};

  @if($field == 'font-size'){
    $return-value: $font-size;
  }@else if($field == 'date-width'){
    $return-value: $height;
  }@else if($field == 'year-width'){
    $return-value: $year-width;
  }@else if($field == 'month-width'){
    $return-value: $year-width;
  }@else if($field == 'time-width'){
    $return-value: $year-width;
  }@else if($field == 'pane-min-width'){
    $return-value: $pane-min-width;
  }@else if($field == 'show-week-number-pane-min-width'){
    $return-value: $show-week-number-pane-min-width;
  }
  @return $return-value;
}

@mixin date-pane-size($size){
  @include ci(date-pane-date){
    min-width: size-common($size, 'pane-min-width');

    &--show-week-number{
      min-width: size-common($size, 'show-week-number-pane-min-width');
    }
  }
  @include ci(date-pane-year){
    min-width: size-common($size, 'pane-min-width');
  }
  @include ci(date-pane-month){
    min-width: size-common($size, 'pane-min-width');
  }
  @include ci(date-pane-single){
    &__header{
      font-size: #{size-common($size, 'font-size') + 2px};
      height: size-common($size, 'date-width');
      line-height: size-common($size, 'date-width');
      i{
        font-size: #{size-common($size, 'font-size') / 1.2};
      }
    }
  }
}

@mixin date-pane-date-size($size){
  $date-width: size-common($size, 'date-width');

  @include ci(date-pane-item){
    &__col, &__week, &__week-number{
      margin: $--date-picker-pane-margin 0;
      padding: 0 $--date-picker-pane-margin;
      em{
        width: $date-width;
        height: $date-width;
        line-height: $date-width;
      }
    }
  }
}


@mixin date-pane-date-year-size($size){
  $year-width: size-common($size, 'year-width');
  $year-height: size-common($size, 'date-width');

  @include ci(date-pane-item){
    &__col{
      margin: $year-and-month-margin 0;
      padding: 0 $year-and-month-margin;
      em{
        width: $year-width;
        height: $year-height;
        line-height: $year-height;
      }
    }
  }
}


@mixin date-pane-date-month-size($size){
  $month-width: size-common($size, 'month-width');
  $month-height: size-common($size, 'date-width');

  @include ci(date-pane-item){
    &__col{
      margin: $year-and-month-margin 0;
      padding: 0 $year-and-month-margin;
      em{
        width: $month-width;
        height: $month-height;
        line-height: $month-height;
      }
    }
  }
}

@mixin date-pane-date-time-size($size, $col){
  $time-width: size-common($size, 'time-width');
  $time-height: size-common($size, 'date-width');
  @if($col == 2){
    $time-width: size-common($size, 'time-width');
  }

  @include ci(date-pane-time){
    &__hh, &__mm, &__ss{
      height: #{($time-height / 1.2) * 8};
    }
  }

  @include ci(date-pane-item){
    &__col{
      display: block;
      //margin: $year-and-month-margin 0;
      padding: 0 $year-and-month-margin;
      em{
        width: $time-width;
        height: #{$time-height / 1.2};
        line-height: #{$time-height / 1.2};
      }
    }
  }
}


@mixin date-pane-item-common{
  $date-pane-item-col-selector: $namespace + '-date-pane-item__col';
  $date-pane-item-now-selector: $namespace + '-date-pane-item__now';
  $date-pane-item-between-selector: $namespace + '-date-pane-item__between';
  $date-pane-item-selected-selector: $namespace + '-date-pane-item__selected';
  $date-pane-item-no-now-month-selector: $namespace + '-date-pane-item__no-now-month';
  $date-pane-item-week-selector: $namespace + '-date-pane-item__week';
  $date-pane-item-week-number-selector: $namespace + '-date-pane-item__week-number';
  $date-pane-item-hover-selector: $namespace + '-date-pane-item__hover';
  $date-pane-item-disabled-selector: $namespace + '-date-pane-item__disabled';

  @include ci(date-pane-date){
    &__date-row-week:not(.#{$namespace + '-date-pane-date__date-row-week-selected'}):hover {
      .#{$date-pane-item-col-selector}:not(.#{$date-pane-item-week-number-selector}){
        background-color: mix($--color-primary, $--color-white, 20%);
      }
    }
  }

  @include ci(date-pane-date__date-row-week-selected){
    .#{$date-pane-item-col-selector}:not(.#{$date-pane-item-week-number-selector}){
      background-color: mix($--color-primary, $--color-white, 20%);
      &:nth-last-of-type(7) em, &:nth-last-of-type(1) em{
        border: 1px solid $--color-primary;
        background-color: $--color-primary;
        color: $--color-white;
      }
    }
  }

  .#{$date-pane-item-col-selector}{
    color: $--color-text-default;
    cursor: pointer;
    transition: all $--animation-time;
    display: inline-block;
    text-align: center;
    em{
      border: 1px solid transparent;
      display: block;
      font-style: normal;
      transition: all $--animation-time;
      border-radius: $--border-radius-default;
    }

    &.#{$date-pane-item-hover-selector} em:hover{
      background-color: mix($--color-primary, $--color-white, 20%);
    }
  }

  .#{$date-pane-item-week-selector}, .#{$date-pane-item-week-number-selector}{
    cursor: default;
    em{
      cursor: default;
    }
  }

  .#{$date-pane-item-week-number-selector} em{
    color: $--date-picker-no-now-month-color;
  }

  .#{$date-pane-item-now-selector} em{
    color: $--color-primary;
  }

  .#{$date-pane-item-between-selector}{
    background-color: mix($--color-primary, $--color-white, 20%);
  }

  .#{$date-pane-item-selected-selector}{
    em{
      border: 1px solid $--color-primary;
      background-color: $--color-primary;
      color: $--color-white;
    }
    &.#{$date-pane-item-no-now-month-selector}{
      background-color: $--color-white;
      color: $--date-picker-no-now-month-color;
    }
  }

  .#{$date-pane-item-disabled-selector} em{
    background-color: $--background-color-disabled;
    color: $--color-text-disabled;
    cursor: not-allowed;
    border-color: transparent;
  }

  .#{$date-pane-item-no-now-month-selector}{
    color: $--date-picker-no-now-month-color;
  }
}
